import random, sys

info_hex: list[str] = [
    'dd03001b1365000000f802580047276e0aaa000000002129030d020ba00b9cfadd77',
    'dd03001b1364000000f802580047276e0555000000002129030d020ba00b9cfb3877',
    'dd03001b1365000000f802580047276e0555000000002129030d020ba00b9cfb3777',
    'dd03001b1365000000f802580047276e0aa8000000002129030d020ba00b9cfadf77',
    'dd03001b1366000000f802580047276e0555000000002129030d020ba00b9cfb3677',
    'dd03001b1364000000f802580047276e0aaa000000002129030d020ba00b9cfade77',
    'dd03001b1363000000f802580047276e0000000000002129030d020ba00baffb8077',
    'dd03001b1363000000f802580047276e0000000000002129030d020ba00b9bfb9477',
    'dd03001b1138006200a404b00000276e028200000000210e030b020b220b10fc4277',
    'dd03001b14c1000003fb03fc0029276e0000000000002164030d020b200b11fb7777',
    'dd03001b14c2000003fb03fc0029276e0000000000002164030d020b200b11fb7677',
    'dd03001b14c1000003fb03fc0029276e0000000000002164010d020b200b11fb7777',
    'dd03001b14c2000003fb03fc0029276e0000000000002164020d020b200b11fb7677',
    'dd03001b139b0000032303fc0029276e000000000000214f030d020b9b0b93fb8e77',
    'dd03001b139b0000032303fc0029276e000000000000214f030d020b9b0b96fb8b77',
    'dd03001b139c0000032303fc0029276e000000000000214f030d020b870b96fb9e77',
    'dd03001b139b0000032303fc0029276e000000000000214f030d020b870b96fb9f77',
    'dd03001b139c0000032303fc0029276e000000000000214f030d020b880b96fb9d77',
]


cell_hex: list[str] = [
    # 'dd0400160fa70fa50fa10f980f9e0fa00fb10fbb0fb10fa60fa7f81877',
    'dd04001a0ffa0ff80ff80ff80ff80ff60ff60ff50ff70ff20ffb0ffb0ff8f29177',
    'dd04001a0ffa0ff90ff80ff80ff80ff50ff60ff50ff70ff20ffb0ffb0ff8f29177',
    'dd04001a0ffb0ff90ff90ff80ff90ff50ff70ff50ff70ff20ffb0ffb0ff8f28d77',
    'dd04001a0ffb0ff90ff80ff80ff80ff60ff60ff50ff70ff20ffb0ffb0ff8f28f77',
    'dd04001a0ffa0ff80ff80ff80ff80ff60ff60ff60ff70ff20ffb0ffb0ff8f29077',
    'dd04001a0ffa0ff80ff80ff80ff90ff60ff60ff50ff70ff20ffb0ffb0ff8f29077',
    'dd04001a0ffb0ff90ff80ff80ff80ff50ff60ff60ff70ff20ffb0ffb0ff8f28f77',
    'dd04001a0ffa0ff90ff90ff80ff80ff50ff70ff50ff70ff20ffb0ffb0ff7f29077',
    'dd04001a0ffb0ff90ff90ff80ff90ff50ff60ff50ff70ff20ffb0ffb0ff8f28e77',
    'dd04001a0ffa0ff90ff90ff80ff80ff60ff60ff50ff70ff20ffb0ffb0ff8f28f77',
    'dd04001a0ffb0ff90ff90ff80ff80ff60ff60ff50ff70ff20ffc0ffb0ff8f28d77',
    'dd04001a0ffa0ff80ff90ff80ff80ff60ff70ff50ff70ff20ffb0ffb0ff8f28f77',
    'dd04001a0ffa0ff80ff90ff80ff80ff50ff60ff50ff70ff20ffb0ffb0ff8f29177',
    'dd04001a0ffb0ff90ff80ff80ff80ff60ff70ff50ff70ff20ffb0ffb0ff8f28e77',
    'dd04001a0ffb0ff90ff90ff80ff90ff60ff60ff50ff70ff20ffb0ffb0ff8f28d77',
    'dd04001a0ffb0ff90ff80ff80ff90ff60ff70ff50ff80ff20ffb0ffb0ff8f28c77',
    'dd04001a0ffb0ff90ff80ff80ff90ff60ff60ff50ff70ff20ffb0ffb0ff8f28e77',
    'dd04001a0ffb0ff90ff90ff80ff80ff50ff60ff50ff80ff20ffb0ffb0ff7f28f77',
    'dd04001a0ffb0ff80ff90ff80ff80ff50ff60ff50ff70ff20ffb0ffb0ff8f29077',
    'dd04001a0ffa0ff80ff80ff80ff80ff60ff60ff50ff70ff20ffb0ffb0ff7f29277',
    'dd04001a0ffa0ff90ff90ff80ff90ff50ff60ff50ff70ff20ffb0ffb0ff8f28f77',
    'dd04001a0ffb0ff90ff90ff80ff90ff60ff70ff50ff70ff20ffb0ffb0ff8f28c77',
    'dd04001a0ffb0ff90ff80ff80ff80ff60ff60ff50ff70ff20ffb0ffb0ff7f29077',
    'dd04001a0ffb0ff90ff90ff80ff80ff50ff60ff50ff70ff20ffb0ffb0ff8f28f77',
    'dd04001a0ffb0ff90ff90ff80ff80ff50ff60ff60ff70ff20ffb0ffb0ff8f28e77',
    'dd04001a0ffa0ff90ff90ff80ff80ff50ff60ff50ff70ff20ffb0ffb0ff8f29077',
    'dd04001a0ffa0ff90ff90ff80ff90ff50ff60ff50ff70ff20ffb0ffb0ff7f29077',
    'dd04001a0ffb0ff90ff90ff80ff80ff50ff70ff60ff70ff20ffb0ffb0ff7f28e77',
    'dd04001a0ffa0ff90ff80ff80ff80ff60ff60ff50ff70ff20ffb0ffb0ff7f29177',
    'dd04001a0ffb0ff90ff80ff80ff80ff50ff60ff50ff70ff20ffb0ffb0ff8f29077',
    'dd04001a0ffa0ff90ff80ff80ff80ff60ff60ff50ff70ff20ffb0ffb0ff8f29077',
    'dd04001a0ffa0ff90ff90ff80ff80ff50ff70ff50ff70ff20ffb0ffb0ff8f28f77',
    'dd04001a0ffb0ff80ff80ff80ff80ff60ff60ff50ff70ff20ffb0ffb0ff8f29077',
    'dd04001a0ffb0ff90ff80ff80ff90ff50ff70ff50ff70ff20ffb0ffb0ff8f28e77',
    'dd04001a0ffb0ff90ff80ff80ff90ff50ff60ff50ff70ff20ffb0ffb0ff8f28f77',
    'dd04001a0ffa0ff80ff80ff80ff80ff50ff60ff50ff70ff20ffb0ffb0ff8f29277',
    'dd04001a0ffa0ff90ff90ff80ff90ff50ff60ff60ff70ff20ffb0ffb0ff8f28e77',
    'dd04001a0ffa0ff90ff90ff80ff90ff60ff60ff50ff70ff20ffb0ffb0ff8f28e77',
    'dd04001a0f180f160f190f180f180f0c0f180f120f140f130f160f180f12fe0f77',
    'dd04001a0f180f170f1a0f180f190f0c0f180f130f150f130f160f180f12fe0a77',
    'dd04001a0f180f160f1a0f180f180f0c0f170f130f140f130f160f180f12fe0e77',
    'dd04001a0f180f170f1a0f180f190f0d0f180f130f150f140f160f190f13fe0677',
    'dd04001a0f180f170f190f180f180f0c0f180f130f150f130f160f180f13fe0b77',
    'dd04001a0f180f170f1a0f180f190f0c0f170f130f150f130f160f180f12fe0b77',
    'dd04001a0f180f160f190f180f180f0c0f170f130f140f130f160f180f12fe0f77',
    'dd04001a0f180f160f190f180f180f0c0f170f120f140f130f160f180f12fe1077',
    'dd04001a0f180f160f190f180f180f0c0f170f130f140f130f150f180f11fe1177',
    'dd04001a0f180f170f190f180f180f0c0f170f120f140f130f160f180f12fe0f77',
    'dd04001a0f180f160f190f180f180f0d0f170f130f150f130f160f180f12fe0d77',
    'dd04001a0f180f160f190f180f180f0c0f170f120f140f130f160f180f11fe1177',
    'dd04001a0f180f160f1a0f180f180f0c0f170f130f150f130f150f180f12fe0e77',
    'dd04001a0f180f170f1a0f180f190f0d0f180f130f150f130f160f180f13fe0877',
    'dd04001a0f180f170f1a0f180f190f0d0f180f130f150f140f160f180f13fe0777',
    'dd04001a0f190f170f1a0f190f190f0d0f180f140f150f140f170f190f13fe0277',
    'dd04001a0f180f160f190f180f180f0c0f170f120f140f130f150f180f12fe1177',
    'dd04001a0f180f170f1a0f180f180f0c0f170f130f150f130f160f180f12fe0c77',
    'dd04001a0f180f160f190f180f180f0c0f170f120f140f130f150f170f11fe1377',
    'dd04001a0f180f170f1a0f190f190f0d0f180f130f150f140f160f180f13fe0677',
    'dd04001a0f180f170f1a0f180f180f0c0f170f130f140f130f160f180f12fe0d77',
    'dd04001a0f180f170f190f180f180f0c0f170f120f140f130f150f180f12fe1077',
    'dd04001a0f190f170f1a0f190f190f0d0f180f130f150f140f170f190f13fe0377',
    'dd04001a0f190f170f1a0f190f190f0d0f180f130f150f140f160f190f13fe0477',
    'dd04001a0f180f160f190f180f180f0c0f170f120f140f120f150f180f12fe1277',
    'dd04001a0f180f160f190f180f180f0c0f170f120f140f130f150f170f12fe1277',
    'dd04001a0f180f170f1a0f180f180f0d0f170f130f150f130f160f180f12fe0b77',
    'dd04001a0f180f170f1a0f180f190f0c0f180f130f150f130f160f180f13fe0977',
]

fails: list[bytes] = [
    b'',
    b'\x00'
]

def get_response(category: str, failure_rate: float, seq: bool = False):
    if random.random() <= failure_rate:
        print('Injecting failed response')
        return random.choice(fails)

    db_seq = {'info': info_iter, 'cell': cell_iter}
    if seq:
        try:
            raw = next(db_seq[category])
        except StopIteration:
            sys.exit(0)
        # print(raw)
        return bytes.fromhex(raw[1])

    db = {'info': info_hex, 'cell': cell_hex}
    raws = tuple(bytes.fromhex(resp) for resp in db[category])

    return random.choice(raws)


cell_seq: list[str] = [
    'dd04001a0f1b0f190f1c0f1c0f1c0f0f0f1c0f170f170f170f1e0f1c0f17fdda77',
    'dd04001a0f1b0f190f1c0f1c0f1c0f0f0f1b0f170f170f170f1f0f1c0f17fdda77',
    'dd04001a0f1b0f190f1c0f1c0f1c0f0f0f1b0f170f170f170f1f0f1c0f17fdda77',
    'dd04001a0f1b0f190f1c0f1c0f1c0f0f0f1c0f170f170f170f1e0f1c0f17fdda77',
    'dd04001a0f1b0f190f1b0f1c0f1c0f0f0f1c0f170f170f170f1e0f1c0f17fddb77',
    'dd04001a0f1b0f190f1c0f1c0f1c0f0e0f1c0f170f170f170f1f0f1c0f17fdda77',
    'dd04001a0eec0ef10ee20eec0ef70ed70edd0ed10ed50ecb0ee70edc0ecaf3dc77',
    'dd04001a0ee80e370e9a0ed30ef30ebf0e480e2d0e980e3b0ea60e120e1df8d577',
    'dd04001a0f120f100f160f160f170f060f160f100f0d0f0e0f170f0e0f0dfe4577',
    'dd04001a0eae0eb90ec80ecc0eca0ea50ec00ecc0eb20eb70eca0eaf0eb9f59f77',
    'dd04001a0e910e5c0e9c0ede0ef60e690ed90ee80e510e5b0e9d0ec50e87f71477',
    'dd04001a0ee00ee30e9e0eb30edd0e6f0e9d0ea60e720e7f0e9f0e8a0e68f70b77',
    'dd04001a0f0f0f090f120f120f130eff0f100f0d0f050f090f110f080f09fd8977',
    'dd04001a0d970e6e0e670e180e130e9c0e7a0e2c0ecc0e740e6e0f060ebcf9e777',
    'dd04001a0e200d5f0da00db80dde0d4e0d9f0d790d4f0d5c0da40d5a0d52f92677',
    'dd04001a0efa0ef60f030f040f070ee80f000eff0ef50ef70f020efa0ef5f76977',
    'dd04001a0f0b0f070f0c0f0c0f0d0efd0f0b0f080f040f050f0b0f080f05fdbc77',
    'dd04001a0ef10ee70eda0edb0ef10ebf0eef0ed00ec80eca0edd0f070ed5f4e877',
    'dd04001a0ee40ed10ed80ee50ef90ebe0eed0ee50ebe0ed50ed60ecb0ed7f42a77',
    'dd04001a0ee20e410eb80eda0eef0e920ed80ee40e3b0e320e960ebc0e1bf76477',
    'dd04001a0ecf0ece0edc0edd0ee10ec20eda0ecf0ec60ecc0edf0ecb0ecaf48877',
    'dd04001a0ea50e950eaf0eb70ebe0e880ead0ea20e9a0e990eae0e970ea1f6e277',
    'dd04001a0efd0efa0efe0efe0f040edd0ef90efb0edb0eea0efd0ec40ee3f3fe77',
    'dd04001a0f0a0f060f0c0f0c0f0c0efc0f0b0f070f040f050f0b0f080f05fdc177',
    'dd04001a0f0d0f0b0f0e0f0e0f0d0f000f0d0f0a0f080f080f0d0f0c0f09fe9977',
    'dd04001a0f0e0f0c0f0f0f0f0f0e0f010f0e0f0a0f090f090f0f0f0d0f09fe8d77',
    'dd04001a0f0f0f0d0f0f0f100f0f0f020f0f0f0b0f0a0f0a0f100f0e0f0afe8177',
    'dd04001a0f0f0f0d0f100f110f0f0f030f100f0b0f0b0f0a0f100f0f0f0bfe7a77',
    'dd04001a0f100f0e0f100f110f100f030f100f0c0f0b0f0b0f110f0f0f0cfe7377',
    'dd04001a0f100f0f0f110f110f100f040f110f0c0f0c0f0b0f110f100f0cfe6d77',
    'dd04001a0f100f0f0f110f120f100f040f110f0c0f0c0f0b0f110f100f0cfe6c77',
    'dd04001a0f140f120f140f150f140f080f140f100f100f0f0f140f150f10fe3c77',
    'dd04001a0f150f130f150f150f140f090f140f100f110f100f150f160f10fe3477',
    'dd04001a0f150f130f150f150f140f090f150f100f110f100f150f160f11fe3277',
    'dd04001a0f150f140f150f160f150f090f150f110f120f110f160f160f11fe2b77',
    'dd04001a0f160f140f150f160f160f090f150f110f120f110f160f170f11fe2877',
    'dd04001a0f160f140f160f160f160f0a0f150f110f120f110f160f170f12fe2577',
    'dd04001a0f160f150f160f160f160f0a0f160f110f120f110f160f170f12fe2377',
    'dd04001a0f160f150f160f160f160f0a0f160f120f120f110f170f170f12fe2177',
    'dd04001a0f160f150f160f170f160f0a0f160f120f130f120f170f170f12fe1e77',
    'dd04001a0f160f150f160f170f160f0a0f160f120f130f120f170f180f12fe1d77',
    'dd04001a0f170f150f160f170f160f0b0f170f120f130f120f170f180f12fe1a77',
    'dd04001a0f170f160f170f170f160f0b0f170f120f130f120f170f180f13fe1777',
]
cell_iter = enumerate(cell_seq[15:26])
# cell_iter = enumerate(cell_seq)

info_seq: list[str] = [
    'dd03001b13a10000032203fc0029276e000000000000214f030d020b350b35fc4d77',
    'dd03001b13a00000032203fc0029276e000000000000214f030d020b350b35fc4e77',
    'dd03001b13a00000032203fc0029276e000000000000214f030d020b350b35fc4e77',
    'dd03001b13a00000032203fc0029276e000000000000214f030d020b350b35fc4e77',
    'dd03001b13a00000032203fc0029276e000000000000214f030d020b350b35fc4e77',
    'dd03001b13a00000032203fc0029276e000000000000214f030d020b350b35fc4e77',
    'dd03001b1352ff33032203fc0029276e000000000000214f030d020b350b35fb6a77',
    'dd03001b12a3fd15032203fc0029276e000000000000214f030d020b350b35fb3a77',
    'dd03001b13910000032203fc0029276e000000000000214f030d020b350b35fc5d77',
    'dd03001b134aff55032203fc0029276e000000000000214f030d020b350b35fb5077',
    'dd03001b12b1fdf3032203fc0029276e000000000000214f030d020b350b35fa4e77',
    'dd03001b12c1fe02032203fc0029276e000000000000214f030d020b350b35fb2e77',
    'dd03001b138a0000032203fc0029276e000000000000214f030d020b350b35fc6477',
    'dd03001b1390ffcd032103fc0029276e000000000000214f030d020b350b35fa9377',
    'dd03001b118afaff032103fc0029276e000000000000214f030d020b350b35fa6e77',
    'dd03001b136e0000032103fc0029276e000000000000214f030d020b350b35fc8177',
    'dd03001b13880000032103fc0029276e000000000000214f030d020b350b35fc6777',
    'dd03001b1384ffdc032103fc0029276e000000000000214f030d020b350b35fa9077',
    'dd03001b12f8feeb032103fc0029276e000000000000214f030d020b350b35fa0f77',
    'dd03001b12a0fdc2032103fc0029276e000000000000214f030d020b350b35fa9177',
    'dd03001b1351ff81032103fc0029276e000000000000214f030d020b350b35fb1e77',
    'dd03001b132afefe032103fc0029276e000000000000214f030d020b350b35fac977',
    'dd03001b1316ff5f032103fc0029276e000000000000214f030d020b350b35fb7b77',
    'dd03001b13870000032103fc0029276e000000000000214f030d020b350b35fc6877',
    'dd03001b138c0000032103fc0029276e000000000000214f030d020b350b35fc6377',
    'dd03001b138e0000032103fc0029276e000000000000214f030d020b350b35fc6177',
    'dd03001b13900000032103fc0029276e000000000000214f030d020b350b35fc5f77',
    'dd03001b13900000032103fc0029276e000000000000214f030d020b350b35fc5f77',
    'dd03001b13910000032103fc0029276e000000000000214f030d020b350b35fc5e77',
    'dd03001b13920000032103fc0029276e000000000000214f030d020b350b35fc5d77',
    'dd03001b13920000032103fc0029276e000000000000214f030d020b350b35fc5d77',
    'dd03001b13960000032103fc0029276e000000000000214f030d020b350b35fc5977',
    'dd03001b13970000032103fc0029276e000000000000214f030d020b350b35fc5877',
    'dd03001b13980000032103fc0029276e000000000000214f030d020b350b35fc5777',
    'dd03001b13980000032103fc0029276e000000000000214f030d020b350b35fc5777',
    'dd03001b13990000032003fc0029276e000000000000214e030d020b350b35fc5877',
    'dd03001b13990000032003fc0029276e000000000000214e030d020b350b35fc5877',
    'dd03001b13990000032003fc0029276e000000000000214e030d020b350b35fc5877',
    'dd03001b13990000032003fc0029276e000000000000214e030d020b350b35fc5877',
    'dd03001b139a0000032003fc0029276e000000000000214e030d020b350b35fc5777',
    'dd03001b139a0000032003fc0029276e000000000000214e030d020b350b35fc5777',
    'dd03001b139a0000032003fc0029276e000000000000214e030d020b350b35fc5777',
    'dd03001b139b0000032003fc0029276e000000000000214e030d020b350b35fc5677',
]
info_iter = enumerate(info_seq[15:26])
# info_iter = enumerate(info_seq)
